# 用户管理功能说明

## 功能概述

本次更新将用户信息改为真实的数据库数据，并完善了用户列表页面的增删改查功能。

## 数据库结构更新

### User实体扩展
- **基础信息**：用户名、密码、邮箱、真实姓名
- **联系信息**：手机号
- **工作信息**：部门、职位
- **系统信息**：角色、状态、创建时间、更新时间、最后登录时间

### 枚举类型
- **用户角色**：
  - `ADMIN` - 管理员
  - `MANAGER` - 经理
  - `USER` - 普通用户

- **用户状态**：
  - `ACTIVE` - 激活
  - `INACTIVE` - 禁用
  - `PENDING` - 待审核

## 示例数据

系统自动创建了以下示例用户：

| 用户名 | 姓名 | 邮箱 | 部门 | 职位 | 角色 | 状态 |
|--------|------|------|------|------|------|------|
| admin | 系统管理员 | admin@vuespring.com | 信息技术部 | 系统管理员 | 管理员 | 激活 |
| zhangsan | 张三 | zhangsan@vuespring.com | 技术部 | 前端工程师 | 普通用户 | 激活 |
| lisi | 李四 | lisi@vuespring.com | 技术部 | 后端工程师 | 普通用户 | 激活 |
| wangwu | 王五 | wangwu@vuespring.com | 产品部 | 产品经理 | 经理 | 激活 |
| zhaoliu | 赵六 | zhaoliu@vuespring.com | 设计部 | UI设计师 | 普通用户 | 激活 |
| sunqi | 孙七 | sunqi@vuespring.com | 市场部 | 市场专员 | 普通用户 | 激活 |
| zhouba | 周八 | zhouba@vuespring.com | 销售部 | 销售经理 | 经理 | 激活 |
| wujiu | 吴九 | wujiu@vuespring.com | 人事部 | 人事专员 | 普通用户 | 激活 |
| zhengshi | 郑十 | zhengshi@vuespring.com | 财务部 | 财务分析师 | 普通用户 | 激活 |
| liuyi | 刘一 | liuyi@vuespring.com | 技术部 | 测试工程师 | 普通用户 | 禁用 |
| chener | 陈二 | chener@vuespring.com | 运营部 | 运营专员 | 普通用户 | 待审核 |

所有示例用户的默认密码都是：`123456`

## 前端功能

### 用户列表页面
- **数据展示**：
  - 用户头像（基于姓名首字母生成）
  - 用户信息（姓名、用户名）
  - 联系方式（邮箱、手机号）
  - 部门职位信息
  - 角色和状态标签
  - 创建时间

- **搜索和筛选**：
  - 实时搜索（用户名、姓名、邮箱）
  - 状态筛选（激活、禁用、待审核）
  - 角色筛选（管理员、经理、普通用户）

- **分页功能**：
  - 每页显示10条记录
  - 分页导航
  - 总数统计

### 用户操作

#### 1. 添加用户
- **必填字段**：用户名、姓名、邮箱、密码
- **可选字段**：手机号、部门、职位
- **系统字段**：角色、状态
- **验证规则**：
  - 用户名唯一性检查
  - 邮箱格式和唯一性检查
  - 密码长度至少6位
  - 确认密码一致性检查

#### 2. 编辑用户
- 可修改除用户名外的所有信息
- 不能修改密码（需要单独重置）
- 实时验证邮箱唯一性

#### 3. 删除用户
- 确认对话框防止误删
- 物理删除（不可恢复）

#### 4. 状态切换
- 一键激活/禁用用户
- 确认对话框

#### 5. 重置密码
- 独立的密码重置功能
- 新密码长度验证
- 确认密码一致性检查

### 统计信息
- 总用户数
- 活跃用户数
- 当前页码
- 总页数

## 后端API

### 用户管理接口

#### 获取用户列表
```
GET /api/users
参数：
- page: 页码（从0开始）
- size: 每页大小
- sortBy: 排序字段
- sortDir: 排序方向（asc/desc）
- search: 搜索关键词
```

#### 获取单个用户
```
GET /api/users/{id}
```

#### 创建用户
```
POST /api/users
请求体：User对象（JSON格式）
```

#### 更新用户
```
PUT /api/users/{id}
请求体：User对象（JSON格式）
```

#### 删除用户
```
DELETE /api/users/{id}
```

#### 批量删除用户
```
DELETE /api/users/batch
请求体：{ "ids": [1, 2, 3] }
```

#### 更新用户状态
```
PATCH /api/users/{id}/status
请求体：{ "status": "ACTIVE" }
```

#### 重置密码
```
PATCH /api/users/{id}/password
请求体：{ "password": "newPassword" }
```

## 技术特性

### 前端特性
- **Vue 3 Composition API**：现代化的组件开发
- **响应式设计**：适配桌面和移动设备
- **实时搜索**：防抖处理，提升用户体验
- **分页加载**：大数据量友好
- **表单验证**：前端实时验证
- **错误处理**：友好的错误提示

### 后端特性
- **Spring Data JPA**：强大的数据访问层
- **分页查询**：高效的大数据处理
- **模糊搜索**：支持多字段搜索
- **数据验证**：Bean Validation注解
- **密码加密**：BCrypt安全加密
- **事务管理**：数据一致性保证

## 安全考虑

1. **密码安全**：
   - BCrypt加密存储
   - 前端不显示密码
   - 独立的密码重置功能

2. **数据验证**：
   - 前后端双重验证
   - 唯一性约束
   - 输入格式检查

3. **权限控制**：
   - 登录状态检查
   - 角色权限预留

## 使用说明

1. **访问用户管理**：
   - 登录系统后点击"用户管理"菜单
   - 默认显示所有用户列表

2. **搜索用户**：
   - 在搜索框输入关键词
   - 支持搜索用户名、姓名、邮箱

3. **筛选用户**：
   - 使用状态下拉框筛选不同状态的用户
   - 使用角色下拉框筛选不同角色的用户

4. **管理用户**：
   - 点击"添加用户"按钮创建新用户
   - 点击编辑按钮修改用户信息
   - 点击状态按钮切换用户激活状态
   - 点击密钥按钮重置用户密码
   - 点击删除按钮删除用户

## 测试建议

1. **功能测试**：
   - 测试所有CRUD操作
   - 验证搜索和筛选功能
   - 检查分页功能

2. **数据验证测试**：
   - 测试必填字段验证
   - 测试唯一性约束
   - 测试密码强度要求

3. **边界测试**：
   - 测试空数据情况
   - 测试大量数据分页
   - 测试网络错误处理

4. **用户体验测试**：
   - 测试响应式布局
   - 测试加载状态显示
   - 测试错误提示信息

## 后续优化建议

1. **功能增强**：
   - 批量操作（批量激活/禁用）
   - 用户导入/导出
   - 高级搜索条件

2. **性能优化**：
   - 虚拟滚动（大数据量）
   - 缓存机制
   - 懒加载

3. **用户体验**：
   - 拖拽排序
   - 快捷键支持
   - 操作历史记录

4. **安全增强**：
   - 操作日志记录
   - 权限细化控制
   - 密码策略配置 